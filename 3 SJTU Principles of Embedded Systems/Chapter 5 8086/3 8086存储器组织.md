## 1.1 存储器地址分段
这个主要是为了解决地址线20位寻址空间有1MB但是内部的数据线和寄存器都只有16位的问题, 对于任意一个实际的物理地址, 我们用 段基址:偏移地址的逻辑地址来表示它的地址, 段基址指的是每段的起始地址,它的最低四位一定是0, 所以实际工作的时候，段基址以16位的形式存放在段寄存器里，最低的四位0是隐含的，物理地址等于段基址左移四位后加上偏移地址得到。 

显然，同一个物理地址可能对应不同的逻辑地址, 各个段之间可以是连续的，也可以重叠, 需要注意的是, 存储器地址的低端和高端,有一些存储单元具有专门的用途,例如存放中断服务函数入口的中断向量表，系统复位等等,这些空间用户不能随便占用, 用户可以通过设置变量占位等方式向操作系统申请一段空间用来编写程序等。

## 1.2 存储器的分体结构

8086 的1MB存储空间分成两个存储体: 偶地址存储体 和 奇地址存储体, 容量各为512KB。 当A0=0的时候, 访问偶地址存储体, 偶地址存储体与数据总线低八位相连, 从低八位读写一个字节, 而当BHE' = 0的时候, 访问奇地址存储体, 奇地址存储体与数据总线高八位相连, 由高八位数据总线读写一个字节。 A0=0且BHE' = 0 的时候, 访问两个存储体, 读写一个字。

一个字在存储器中以相邻的两个字节存放, 存入的时候低位字节在低地址，高位字节在高地址。 一个字可以从偶地址开始存放,也可以从奇地址开始存放, 但是8086访问存储器都是以字为单位进行访问，并且从偶地址开始！ 如果字单位的地址从偶地址开始, 只需要访问一次存储器, 而字单位的地址从奇地址开始，CPU就需要访问两次存储器。

## 1.3 堆栈
堆栈是存储器中开辟的一个区域，用以存放需要暂时保存的数据, 堆栈容量小于等于64KB. 堆栈的段基址由段寄存器SS指定，SS:SP指向栈顶, 堆栈的地址增长一般是向上增长，也就是说，栈底设在存储器的高地址区, 每次压入元素 SP<-SP-2, 所以当栈是空的时候, SS:SP指向堆栈的最高地址。

1. 堆栈的操作只能在栈顶进行,并且入栈和出栈都必须是以字为单位,进行一次入栈操作,SP-2,进行一次出栈操作,SP+2.
2. 堆栈操作遵循FILO原则

## 2.1 8086 CPU 的时序
微处理器是在统一的时钟信号CLK的控制下进行工作的, 8086的系统时钟频率为5MHz,因此一个时钟周期等于200ns. CPU的时序分为时钟周期和总线周期, 通过总线对存储器或者I/O接口进行一次访问所需要的时间称为总线周期。

一般而言，一条指令的执行需要若干个总线周期, 一个总线周期又由若干个时钟周期构成, 8086CPU的一个读(写)总线周期至少包括 4 个时钟周期，因此时钟周期越短，CPU执行的速度就越快。 

8086的数据总线和部分地址总线是分时复用的，在一个总线周期内，先利用总线传送地址，然后将地址**锁存**后,再利用同一总线进行数据的传送。 T1期间，BIU将要访问的存储单元输入或者I/O端口地址送上总线, 如果是读周期，在T2将总线设置为高阻缓冲状态,使得CPU有时间从输出地址方式转换为输入数据方式，再在T3和T4时期从总线读入数据到CPU. 如果是写周期, CPU就不必转换工作方式，将地址锁存后直接输出数据到总线。

## 2.2 最小模式下的时序
以最小模式为例, 在T1, 地址/状态复用信号线A19/S6~A16/S3送出A19~A16, 地址/数据复用信号线 AD15~AD0送出地址A15~A0, 与此同时送出地址锁存允许信号ALE, BHE'的状态由BHE'/S7引脚输出. 外部电路通过ALE的下降沿把地址信号锁存到地址锁存器中。 读总线周期中，CPU在T3到T4期间读入总线上的数据。 而写总线周期,CPU从T2开始把数据送到数据总线并维持到T4.

如果内存或者接口的速度比较慢, 4个时钟周期里不能完成读/写操作, 可通过时钟发生器(8284)产生一个低电平信号送到8086的 READY 端,8086在每个总线周期的T3开始的时候检查READY的状态,如果READY是低电平,则CPU在T3之后插入一个等待时钟周期Tw,并且在每个Tw开始的时刻,检查READY信号,如果READY仍然是低电平，就再插入一个Tw,直到READY变为高电平为止。

## 2.3 系统的复位和启动操作时序
8086CPU通过RESET 引脚上的触发信号来对8086进行复位和启动, 复位信号 RESET 至少维持4个时钟周期的高电平。 当RESET信号变为高电平的时候,8086CPU结束现行操作，各个内部寄存器复位成初值:

1. FLAGS: 0000H
2. IP: 0000H
3. CS: FFFFH
4. DS: 0000H
5. SS: 0000H
6. ES: 0000H
7. 指令队列: 空

在FFFF0H处存放了一条无条件转移指令,转移到系统引导程序的入口处!

在复位的时候，因为FLAGS被清零，INTR引脚进入的可屏蔽中断被禁用，因此在系统程序中要用开中断指令STI来设置中断允许标志。





